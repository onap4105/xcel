The stack-kubelet/1 job configuration is not directly defined in the kube-prometheus-stack Helm chart itself. Instead, it is dynamically generated by the Prometheus Operator based on the ServiceMonitor and PodMonitor Custom Resources (CRDs) deployed in your cluster. Here's why you can't find it in the Helm chart:

the container_cpu_usage_seconds_total metric exists (3.82k samples) but lacks Kubernetes labels like namespace, pod, or container, Prometheus is scraping the metric without the proper Kubernetes metadata,  To stop dropping metrics in the stack-kubelet/1 job, update the Helm values.yaml to remove the metric_relabel_configs section, please use the provided values.yaml to make th echange


To stop dropping metrics in the stack-kubelet/1 job, update the Helm values.yaml to remove the metric_relabel_configs section. Here's how to do it:

The kubernetes-cadvisor job is responsible for scraping cAdvisor metrics from the kubelet endpoint, which includes critical labels like namespace, pod, and container. Without this job, Prometheus cannot associate metrics with Kubernetes resources.

